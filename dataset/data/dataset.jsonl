{"instruction": "Write a Plan 9 C program that prints 'Hello, Plan 9!'", "response": "#include <u.h>\n#include <libc.h>\n\nvoid\nmain(int, char**)\n{\n\tprint(\"Hello, Plan 9!\\n\");\n\texits(nil);\n}\n", "category": "c-basics", "source": "curated", "file_type": "c"}
{"instruction": "Write a Plan 9 C program that prints numbers 1 to 10", "response": "#include <u.h>\n#include <libc.h>\n\nvoid\nmain(int, char**)\n{\n\tint i;\n\tfor(i = 1; i <= 10; i++)\n\t\tprint(\"%d\\n\", i);\n\texits(nil);\n}\n", "category": "c-basics", "source": "curated", "file_type": "c"}
{"instruction": "Write a Plan 9 C program that calculates factorial of 5", "response": "#include <u.h>\n#include <libc.h>\n\nint\nfactorial(int n)\n{\n\tif(n <= 1)\n\t\treturn 1;\n\treturn n * factorial(n - 1);\n}\n\nvoid\nmain(int, char**)\n{\n\tprint(\"5! = %d\\n\", factorial(5));\n\texits(nil);\n}\n", "category": "c-basics", "source": "curated", "file_type": "c"}
{"instruction": "Write a Plan 9 C program with a safe malloc wrapper (emalloc) that exits on failure", "response": "#include <u.h>\n#include <libc.h>\n\nvoid*\nemalloc(ulong sz)\n{\n\tvoid *v;\n\n\tv = malloc(sz);\n\tif(v == nil)\n\t\tsysfatal(\"malloc: %r\");\n\tmemset(v, 0, sz);\n\treturn v;\n}\n\nvoid\nmain(int, char**)\n{\n\tchar *s;\n\n\ts = emalloc(100);\n\tstrcpy(s, \"allocated safely\");\n\tprint(\"%s\\n\", s);\n\tfree(s);\n\texits(nil);\n}\n", "category": "c-memory", "source": "curated/unionfs", "file_type": "c"}
{"instruction": "Write a Plan 9 C program that reads a file and prints its contents using Bio", "response": "#include <u.h>\n#include <libc.h>\n#include <bio.h>\n\nvoid\nmain(int argc, char **argv)\n{\n\tBiobuf *b;\n\tchar *line;\n\n\tif(argc != 2){\n\t\tfprint(2, \"usage: %s file\\n\", argv[0]);\n\t\texits(\"usage\");\n\t}\n\n\tb = Bopen(argv[1], OREAD);\n\tif(b == nil)\n\t\tsysfatal(\"open %s: %r\", argv[1]);\n\n\twhile((line = Brdstr(b, '\\n', 1)) != nil){\n\t\tprint(\"%s\\n\", line);\n\t\tfree(line);\n\t}\n\n\tBterm(b);\n\texits(nil);\n}\n", "category": "c-io", "source": "curated", "file_type": "c"}
{"instruction": "Write a Plan 9 C program that parses command-line flags using ARGBEGIN", "response": "#include <u.h>\n#include <libc.h>\n\nint vflag;\nint nflag;\nchar *name;\n\nvoid\nusage(void)\n{\n\tfprint(2, \"usage: %s [-v] [-n num] [-o name]\\n\", argv0);\n\texits(\"usage\");\n}\n\nvoid\nmain(int argc, char **argv)\n{\n\tARGBEGIN{\n\tcase 'v':\n\t\tvflag = 1;\n\t\tbreak;\n\tcase 'n':\n\t\tnflag = atoi(EARGF(usage()));\n\t\tbreak;\n\tcase 'o':\n\t\tname = EARGF(usage());\n\t\tbreak;\n\tdefault:\n\t\tusage();\n\t}ARGEND\n\n\tif(vflag)\n\t\tprint(\"verbose mode\\n\");\n\tif(nflag)\n\t\tprint(\"n = %d\\n\", nflag);\n\tif(name)\n\t\tprint(\"name = %s\\n\", name);\n\texits(nil);\n}\n", "category": "c-args", "source": "curated/git9", "file_type": "c"}
{"instruction": "Write an rc script that prints 'Hello, Plan 9!'", "response": "#!/bin/rc\necho 'Hello, Plan 9!'\n", "category": "rc-basics", "source": "curated", "file_type": "rc"}
{"instruction": "Write an rc script that lists all C files in the current directory", "response": "#!/bin/rc\nls *.c\n", "category": "rc-basics", "source": "curated", "file_type": "rc"}
{"instruction": "Write an rc script with a usage function that prints to stderr", "response": "#!/bin/rc\nrfork e\n\nfn usage {\n\techo 'usage: script [-v] file ...' >[1=2]\n\texit 'usage'\n}\n\nwhile(~ $1 -*)\n\tswitch($1){\n\tcase -v\n\t\tvflag=1\n\t\tshift\n\tcase *\n\t\tusage\n\t}\n\nif(~ $#* 0)\n\tusage\n\nfor(f in $*)\n\tif(test -f $f)\n\t\techo $f\n", "category": "rc-flags", "source": "curated", "file_type": "rc"}
{"instruction": "Write a Plan 9 mkfile that compiles a single C file", "response": "</$objtype/mkfile\n\nTARG=prog\n\nOFILES=prog.$O\n\n</sys/src/cmd/mkone\n", "category": "mkfile", "source": "curated", "file_type": "mkfile"}
{"instruction": "Write a Plan 9 C program using libthread that creates a worker thread", "response": "#include <u.h>\n#include <libc.h>\n#include <thread.h>\n\nvoid\nworker(void *arg)\n{\n\tchar *msg = arg;\n\tprint(\"worker: %s\\n\", msg);\n\tthreadexits(nil);\n}\n\nvoid\nthreadmain(int, char**)\n{\n\tproccreate(worker, \"hello from thread\", 8192);\n\tsleep(100);\n\tthreadexits(nil);\n}\n", "category": "c-threads", "source": "curated", "file_type": "c"}
{"instruction": "Write a Plan 9 C program that uses channels to communicate between threads", "response": "#include <u.h>\n#include <libc.h>\n#include <thread.h>\n\nChannel *c;\n\nvoid\nsender(void *)\n{\n\tint i;\n\tfor(i = 0; i < 5; i++){\n\t\tsend(c, &i);\n\t\tsleep(10);\n\t}\n\tthreadexits(nil);\n}\n\nvoid\nthreadmain(int, char**)\n{\n\tint v;\n\n\tc = chancreate(sizeof(int), 0);\n\tproccreate(sender, nil, 8192);\n\n\twhile(recv(c, &v) > 0)\n\t\tprint(\"received: %d\\n\", v);\n\n\tchanfree(c);\n\tthreadexits(nil);\n}\n", "category": "c-channels", "source": "curated/mpl", "file_type": "c"}
{"instruction": "Write a Plan 9 C program that connects to a TCP server using dial", "response": "#include <u.h>\n#include <libc.h>\n\nvoid\nmain(int argc, char **argv)\n{\n\tint fd;\n\tchar buf[1024];\n\tint n;\n\n\tif(argc != 2){\n\t\tfprint(2, \"usage: %s tcp!host!port\\n\", argv[0]);\n\t\texits(\"usage\");\n\t}\n\n\tfd = dial(argv[1], nil, nil, nil);\n\tif(fd < 0)\n\t\tsysfatal(\"dial %s: %r\", argv[1]);\n\n\twhile((n = read(fd, buf, sizeof(buf)-1)) > 0){\n\t\tbuf[n] = '\\0';\n\t\tprint(\"%s\", buf);\n\t}\n\n\tclose(fd);\n\texits(nil);\n}\n", "category": "c-network", "source": "curated", "file_type": "c"}
{"instruction": "Write a Plan 9 C program that reads the current username from /dev/user", "response": "#include <u.h>\n#include <libc.h>\n\nvoid\nmain(int, char**)\n{\n\tchar buf[64];\n\tint fd, n;\n\n\tfd = open(\"/dev/user\", OREAD);\n\tif(fd < 0)\n\t\tsysfatal(\"open /dev/user: %r\");\n\n\tn = read(fd, buf, sizeof(buf)-1);\n\tif(n < 0)\n\t\tsysfatal(\"read: %r\");\n\n\tbuf[n] = '\\0';\n\tprint(\"user: %s\\n\", buf);\n\tclose(fd);\n\texits(nil);\n}\n", "category": "c-sysinfo", "source": "curated", "file_type": "c"}
{"instruction": "Write a Plan 9 C program that converts a UTF-8 string to runes and counts them", "response": "#include <u.h>\n#include <libc.h>\n\nvoid\nmain(int, char**)\n{\n\tchar *s = \"Hello, 世界!\";\n\tRune r;\n\tint n, count;\n\tchar *p;\n\n\tcount = 0;\n\tp = s;\n\twhile(*p){\n\t\tn = chartorune(&r, p);\n\t\tprint(\"rune %d: %C (U+%04X)\\n\", count, r, r);\n\t\tp += n;\n\t\tcount++;\n\t}\n\tprint(\"total runes: %d\\n\", count);\n\tprint(\"total bytes: %d\\n\", utflen(s));\n\texits(nil);\n}\n", "category": "c-utf", "source": "curated", "file_type": "c"}
{"instruction": "Write a Plan 9 C program that duplicates a string using strdup", "response": "#include <u.h>\n#include <libc.h>\n\nvoid\nmain(int, char**)\n{\n\tchar *orig = \"Plan 9 from Bell Labs\";\n\tchar *copy;\n\n\tcopy = strdup(orig);\n\tif(copy == nil)\n\t\tsysfatal(\"strdup: %r\");\n\n\tprint(\"original: %s\\n\", orig);\n\tprint(\"copy: %s\\n\", copy);\n\n\tfree(copy);\n\texits(nil);\n}\n", "category": "c-strings", "source": "curated", "file_type": "c"}
{"instruction": "Write a Plan 9 C program that formats a string using smprint", "response": "#include <u.h>\n#include <libc.h>\n\nvoid\nmain(int, char**)\n{\n\tchar *s;\n\tint n = 42;\n\tchar *name = \"glenda\";\n\n\ts = smprint(\"Hello %s, the answer is %d\", name, n);\n\tif(s == nil)\n\t\tsysfatal(\"smprint: %r\");\n\n\tprint(\"%s\\n\", s);\n\tfree(s);\n\texits(nil);\n}\n", "category": "c-strings", "source": "curated", "file_type": "c"}
{"instruction": "Write a Plan 9 C program that gets the current time using nsec", "response": "#include <u.h>\n#include <libc.h>\n\nvoid\nmain(int, char**)\n{\n\tvlong start, end, elapsed;\n\tint i, sum;\n\n\tstart = nsec();\n\n\t/* do some work */\n\tsum = 0;\n\tfor(i = 0; i < 1000000; i++)\n\t\tsum += i;\n\n\tend = nsec();\n\telapsed = end - start;\n\n\tprint(\"sum: %d\\n\", sum);\n\tprint(\"elapsed: %lld ns\\n\", elapsed);\n\tprint(\"elapsed: %lld us\\n\", elapsed / 1000);\n\texits(nil);\n}\n", "category": "c-time", "source": "curated", "file_type": "c"}
{"instruction": "Write a Plan 9 C program that writes to a file", "response": "#include <u.h>\n#include <libc.h>\n\nvoid\nmain(int argc, char **argv)\n{\n\tint fd;\n\tchar *msg = \"Hello from Plan 9\\n\";\n\n\tif(argc != 2){\n\t\tfprint(2, \"usage: %s file\\n\", argv[0]);\n\t\texits(\"usage\");\n\t}\n\n\tfd = create(argv[1], OWRITE, 0644);\n\tif(fd < 0)\n\t\tsysfatal(\"create %s: %r\", argv[1]);\n\n\tif(write(fd, msg, strlen(msg)) != strlen(msg))\n\t\tsysfatal(\"write: %r\");\n\n\tclose(fd);\n\tprint(\"wrote to %s\\n\", argv[1]);\n\texits(nil);\n}\n", "category": "c-io", "source": "curated", "file_type": "c"}
{"instruction": "Write an rc script that compiles and runs a C program", "response": "#!/bin/rc\nrfork e\n\nif(~ $#* 0){\n\techo 'usage: build file.c' >[1=2]\n\texit 'usage'\n}\n\nfile=$1\nbase=`{basename $file .c}\n\n6c $file && 6l -o $base $base.6 && ./$base\n", "category": "rc-build", "source": "curated", "file_type": "rc"}
{"instruction": "Write an rc script that creates a temporary file and cleans it up", "response": "#!/bin/rc\nrfork e\n\ntmp=/tmp/test.$pid\n\necho 'temporary data' > $tmp\ncat $tmp\nrm $tmp\n\necho 'cleaned up'\n", "category": "rc-files", "source": "curated", "file_type": "rc"}
